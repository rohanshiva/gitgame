{"ast":null,"code":"import _toConsumableArray from\"/home/runner/work/gitgame/gitgame/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/runner/work/gitgame/gitgame/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";export var LobbyAction=function LobbyAction(state,payload){var hostPlayer=payload.players.find(function(p){return p.is_host;});return _objectSpread(_objectSpread({},state),{},{players:payload.players.filter(function(p){return p.is_connected;}),host:hostPlayer.username});};export var SourceCodeAction=function SourceCodeAction(state,payload){var updates={source_code:payload.code,comments:state.comments,new_comments:state.new_comments};if(state.source_code.id!==payload.code.id){updates.comments=[];updates.new_comments=[];}return _objectSpread(_objectSpread({},state),updates);};export var CommentsAction=function CommentsAction(state,payload){return _objectSpread(_objectSpread({},state),{},{comments:payload.comments});};export var NewCommentAction=function NewCommentAction(state,payload){return _objectSpread(_objectSpread({},state),{},{new_comments:[].concat(_toConsumableArray(state.new_comments),[payload.comment])});};export var AckNewCommentAction=function AckNewCommentAction(state,comment_id){return _objectSpread(_objectSpread({},state),{},{new_comments:state.new_comments.filter(function(_ref){var id=_ref.id;return comment_id!==id;})});};","map":{"version":3,"names":["LobbyAction","state","payload","hostPlayer","players","find","p","is_host","_objectSpread","filter","is_connected","host","username","SourceCodeAction","updates","source_code","code","comments","new_comments","id","CommentsAction","NewCommentAction","concat","_toConsumableArray","comment","AckNewCommentAction","comment_id","_ref"],"sources":["/home/runner/work/gitgame/gitgame/client/src/components/game/actions/GameActions.tsx"],"sourcesContent":["import {\n  GameState,\n  LobbyPayload,\n  Player,\n  SourceCodePayload,\n  CommentsPayload,\n  NewCommentPayload\n} from \"../../../Interface\";\n\nexport const LobbyAction = (\n  state: GameState,\n  payload: LobbyPayload\n): GameState => {\n  const hostPlayer = payload.players.find((p) => p.is_host) as Player;\n  return {\n    ...state,\n    players: payload.players.filter((p) => p.is_connected),\n    host: hostPlayer.username,\n  };\n};\n\nexport const SourceCodeAction = (\n  state: GameState,\n  payload: SourceCodePayload\n):  GameState => {\n\n  let updates = {source_code: payload.code, comments: state.comments, new_comments: state.new_comments};\n  if(state.source_code.id !== payload.code.id){\n    updates.comments = [];\n    updates.new_comments = [];\n  } \n\n  return {\n    ...state,\n    ...updates\n  };\n};\n\nexport const CommentsAction = (\n  state: GameState, payload: CommentsPayload\n): GameState => {\n  return {\n    ...state,\n    comments: payload.comments\n  }\n}\n\nexport const NewCommentAction = (state: GameState, payload: NewCommentPayload): GameState => {\n  return {\n    ...state,\n    new_comments: [...state.new_comments, payload.comment]\n  }\n}\n\nexport const AckNewCommentAction = (state: GameState, comment_id: string): GameState => {\n  return {\n    ...state,\n    new_comments: state.new_comments.filter(({id}) => comment_id !== id)\n  }\n}"],"mappings":"mQASA,MAAO,IAAM,CAAAA,WAAW,CAAG,QAAd,CAAAA,WAAWA,CACtBC,KAAgB,CAChBC,OAAqB,CACP,CACd,GAAM,CAAAC,UAAU,CAAGD,OAAO,CAACE,OAAO,CAACC,IAAI,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACC,OAAO,GAAW,CACnE,OAAAC,aAAA,CAAAA,aAAA,IACKP,KAAK,MACRG,OAAO,CAAEF,OAAO,CAACE,OAAO,CAACK,MAAM,CAAC,SAACH,CAAC,QAAK,CAAAA,CAAC,CAACI,YAAY,GAAC,CACtDC,IAAI,CAAER,UAAU,CAACS,QAAQ,GAE7B,CAAC,CAED,MAAO,IAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAC3BZ,KAAgB,CAChBC,OAA0B,CACX,CAEf,GAAI,CAAAY,OAAO,CAAG,CAACC,WAAW,CAAEb,OAAO,CAACc,IAAI,CAAEC,QAAQ,CAAEhB,KAAK,CAACgB,QAAQ,CAAEC,YAAY,CAAEjB,KAAK,CAACiB,YAAY,CAAC,CACrG,GAAGjB,KAAK,CAACc,WAAW,CAACI,EAAE,GAAKjB,OAAO,CAACc,IAAI,CAACG,EAAE,CAAC,CAC1CL,OAAO,CAACG,QAAQ,CAAG,EAAE,CACrBH,OAAO,CAACI,YAAY,CAAG,EAAE,CAC3B,CAEA,OAAAV,aAAA,CAAAA,aAAA,IACKP,KAAK,EACLa,OAAO,EAEd,CAAC,CAED,MAAO,IAAM,CAAAM,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CACzBnB,KAAgB,CAAEC,OAAwB,CAC5B,CACd,OAAAM,aAAA,CAAAA,aAAA,IACKP,KAAK,MACRgB,QAAQ,CAAEf,OAAO,CAACe,QAAQ,GAE9B,CAAC,CAED,MAAO,IAAM,CAAAI,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIpB,KAAgB,CAAEC,OAA0B,CAAgB,CAC3F,OAAAM,aAAA,CAAAA,aAAA,IACKP,KAAK,MACRiB,YAAY,IAAAI,MAAA,CAAAC,kBAAA,CAAMtB,KAAK,CAACiB,YAAY,GAAEhB,OAAO,CAACsB,OAAO,EAAC,GAE1D,CAAC,CAED,MAAO,IAAM,CAAAC,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAIxB,KAAgB,CAAEyB,UAAkB,CAAgB,CACtF,OAAAlB,aAAA,CAAAA,aAAA,IACKP,KAAK,MACRiB,YAAY,CAAEjB,KAAK,CAACiB,YAAY,CAACT,MAAM,CAAC,SAAAkB,IAAA,KAAE,CAAAR,EAAE,CAAAQ,IAAA,CAAFR,EAAE,OAAM,CAAAO,UAAU,GAAKP,EAAE,GAAC,GAExE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}